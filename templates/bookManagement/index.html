          
            {% extends "base/base.html" %}
            {% block content %}
            {% load static %}
          <!-- Content -->

          <style>
            .badge{min-width: 96px;}
            td p.description{white-space: nowrap; width: 300px; overflow: hidden;   -o-text-overflow: ellipsis; text-overflow: ellipsis;}
          </style>
          <div class="container-xxl flex-grow-1 container-p-y">
            <div class="row">
             
              <div class="col-lg-12 col-md-4 order-1">
                <div class="row">
                 <div class="col-lg-12 mb-4">
                    <div class="card">
                        <h5 class="card-header">
                          <div class="row">
                            <div class="col-lg-2">
                              <a class="btn btn-primary" href="/bookManagement/addBooks/"><i class='bx bx-plus'></i> Add Book</a>
                            </div>
                           
                            <div class="col-lg-3" style="text-align: right;">
                              <form class="d-flex" method="GET" action="/bookManagement/searchBook/">
                                <div class="input-group">
                                    <input type="text" class="form-control" name="search" placeholder="Search...">
                                  <span class="input-group-text"><i class="tf-icons bx bx-search"></i></span>
                                  
                                </div>
                              </form>
                            </div>
                            {% if request.resolver_match.url_name != 'searchBook' %}
                            <div class="col-lg-3" style="text-align: right;">
                              <select id="language" class="select2 form-select" onchange="javascript:handleSelect(this)">
                                
                                {% if request.path == '/bookManagement/listBooks/name/' %}
                                <option value="" disabled>---------------</option>
                                <option value="name" selected>Sort By Name</option>
                                <option value="author">Sort By Author </option>
                                <option value="price">Sort By Price </option>
                                <!-- <option value="createdAt">Sort By Time </option> -->
        
                                {% elif request.path == "/bookManagement/listBooks/author/" %}
                                
                                <option value="" disabled>---------------</option>
                                <option value="name" >Sort By Name</option>
                                <option value="author" selected>Sort By Author </option>
                                <option value="price">Sort By Price </option>
                                <!-- <option value="createdAt">Sort By Time </option> -->
        
        
                                {% elif request.path == "/bookManagement/listUsers/price/" %}
                                
                                <option value="" disabled>---------------</option>
                                <option value="name" >Sort By Name</option>
                                <option value="author" >Sort By Author </option>
                                <option value="price" selected>Sort By Price </option>
        
                                {% else %}
                                <option value="" disabled selected>---------------</option>
                                <option value="name" >Sort By Name</option>
                                <option value="author">Sort By Author </option>
                                <option value="price">Sort By Price </option>
                                <!-- <option value="createdAt">Sort By Time </option> -->
                                {% endif %}
        
                                
                                <!-- <option value="fr">Sort By Date</option> -->
                               
                              </select>
                            </div>
                            {% endif %}
                            {% if request.resolver_match.url_name != 'searchBook' %}
                    <div class="col-lg-4" style="text-align: right;">
                      {% else %}
                      <div class="col-lg-7" style="text-align: right;">
                        {% endif %}
                              <a class="btn btn-primary" href="/bookManagement/listBooks/id/"><i class='bx bx-refresh'></i></a>
                            </div>
                          </div>
                          </h5>
                        <div class="table-responsive text-nowrap">
                          <table class="table">
                            <thead>
                              <tr>
                                <th>Book Details</th>
                                <!-- <th>Author Name</th>
                                <th>Cover Image</th>
                                <th>Description</th>
                                <th>Author Description</th>
                                <th>Price</th> -->
                                <th>PDF Upload</th>
                                <th>Status</th>
                                <th class="text-center">Actions</th>
                              </tr>
                            </thead>
                            <tbody class="table-border-bottom-0">
                              {% for book in books %}
                                <tr>
                                    <td>
                                      <div class="row">
                                        <div class="col-lg-4 p-0">
                                          <img src="{{book.bookCover}}" alt="Avatar" class=" w-100 img-height" />
                                        </div>
                                        <div class="col-lg-8">
                                         <strong> Book Name : {{book.name}}</strong>
                                         <p class="m-0"> Author Name : {{book.author}}</p>
                                         <p class="m-0"> Book Price : &#8377; {{book.price}}</p>
                                         <p class="m-0 description"> Book Description : {{book.description}}</p>
                                         <p class="m-0 description"> Author Description : {{book.authorDescription}}</p>
                                        </div>
                                      </div>
                                    </td>
                                    {% if book.file %}
                                    <td>Yes</td>
                                    {% else %}
                                    <td>No</td>
                                    {% endif %}

                                    {% if book.isAvailable %}
                                    <td><span class="badge bg-label-success me-1">Available</span></td>
                                    {% else %}                      
                                    <td><span class="badge bg-label-danger me-1">Unavailable</span></td>
                                    {% endif %}     
                                    <td>
                                        <button type="submit" class="btn btn-primary btn-sm" ><a href="/bookManagement/editBook/{{book.id}}/"><i class='bx bx-edit-alt text-white'></i></a></button>
                                        <button type="submit" class="btn btn-primary btn-sm" ><a onclick="return confirm('Are you sure you want to delete this book?')" href="/bookManagement/deleteBooks/{{book.id}}/"><i class='bx bx-trash text-white' ></i></a></button>
                                        <button type="submit" class="btn btn-primary btn-sm"><a href="/bookManagement/bookAvailableUnavailable/{{book.id}}/"><i class='bx bx-block text-white' ></i></a></button>
                                        <button type="submit" class="btn btn-primary btn-sm"><a href="/bookManagement/viewBookDetails/{{book.id}}/"><i class='fa fa-eye  text-white' ></i></a></button>

                                    </td>
                                  </tr>
                              
                            
                              {% endfor %}
                            </tbody>
                          </table>
                        </div>


                <div class="demo-inline-spacing mt-4">
                  <nav aria-label="Page navigation">

                    <ul class="pagination justify-content-center">
    
 

                        {% if books.has_previous %}
                            <li class="page-item"><a class="page-link" href="?page=1&search={{search}}">&laquo First</a></li>
                        
                          <li class="page-item"><a class="page-link" href="?page={{ books.previous_page_number }}&search={{search}}">Previous</a></li>
                            
                        {% endif %}
                        
                        
                        <li class="page-item disabled"><a href="#" class="page-link">Page {{ books.number }} of {{ books.paginator.num_pages }}</a></li>
                        
                        
                        {% if books.has_next %}
                            <li class="page-item"><a class="page-link" href="?page={{ books.next_page_number }}&search={{search}}">Next</a></li>
                        
                            <li class="page-item"><a class="page-link" href="?page={{ books.paginator.num_pages }}&search={{search}}">Last &raquo</a></li>
                        
                        {% endif %}
                        
                         </ul>

                  </nav>
                 
                </div>




                      </div>
                      </div>



                </div>
              </div>
            
            </div>
           </div>
          <!-- / Content -->

          <script type="text/javascript">
            function handleSelect(elm)
            {
              if(elm.value=='name'){
              document.location.href = "/bookManagement/listBooks/name/";
              }
              if(elm.value=="author"){
              document.location.href = "/bookManagement/listBooks/author/";
              }
              if(elm.value=="price"){
              document.location.href = "/bookManagement/listBooks/price/";
              }
            }
          </script>
{% endblock %}